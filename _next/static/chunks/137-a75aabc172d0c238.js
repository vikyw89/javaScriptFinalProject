"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{1243:function(e,s,t){t.d(s,{T:function(){return N}});var n=t(5893),a=t(1163),l=t(7294),r=t(664);let i=()=>{let e=(0,a.useRouter)(),s=(0,r.m)("route/loading"),t=(0,r.m)("loadingCounter");return(0,l.useEffect)(()=>{let s=()=>{(0,r._)("route/loading",!0)},t=()=>{(0,r._)("route/loading",!1)};return e.events.on("routeChangeStart",s),e.events.on("routeChangeComplete",t),()=>{e.events.off("routeChangeStart",s),e.events.off("routeChangeComplete",t)}},[e]),(0,n.jsx)("div",{className:"fixed z-50 top-12 w-full flex",children:(s||t>0)&&(0,n.jsx)("progress",{className:"progress progress-accent"})})};var o=t(9744);let d=()=>{let e=(0,r.m)("theme");return(0,l.useEffect)(()=>{(0,r._)("theme",["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"].sort((e,s)=>e>s?1:-1))},[]),e};var c=t(7997),u=t(9557),h=t(8201),m=t(6540),x=t(5328),p=t(9485),f=t(3540),v=t(5675),g=t.n(v),j=t(4334);let b=()=>{var e,s,t,l,i,v;let b=null!==(v=d())&&void 0!==v?v:[],w=(0,o.a)(),k=(0,c.a)(),N=(0,a.useRouter)(),C=(0,j.Z)("api/auth",async()=>{let{error:e}=await u.O.auth.signOut();return e}),_=(0,j.Z)((null==w?void 0:null===(e=w.data)||void 0===e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)&&"api/user/".concat(w.data.user.id),async(e,s)=>{let{arg:t}=s;await u.O.from("users").update({theme:t}).eq("uuid",w.data.user.id).throwOnError()}),y=null==w?void 0:null===(t=w.data)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:null===(i=l.user_metadata)||void 0===i?void 0:i.avatar_url,L=()=>{(0,r._)("show/signInComponent",!0)},Z=()=>{C.trigger()},z=()=>{N.push("/")},S=()=>{N.push("/createPin")},E=e=>{let s=e.target.textContent;if(_.data){let e={optimisticData:{...k.data,theme:s}};_.trigger(s,e)}else document.querySelector("html").setAttribute("data-theme",s)},O=()=>{N.push("/profile")};return(0,n.jsxs)("div",{className:"flex bg-neutral z-20 items-center text-neutral-content",children:[(0,n.jsx)("div",{className:"flex-1 px-2 lg:flex-none flex items-center gap-1 cursor-pointer",children:(0,n.jsxs)("div",{onClick:z,className:"lg:flex-none flex items-center gap-1 cursor-pointer",children:[(0,n.jsx)("div",{className:"w-12",children:(0,n.jsx)(g(),{alt:"pinterest logo",src:"https://hffebrjtrzopihuffrxv.supabase.co/storage/v1/object/public/assets/p-logo-lowres.png",width:"0",priority:!0,height:"0",sizes:"100vw",className:"w-auto"})}),(0,n.jsx)("a",{className:"text-lg font-bold hidden sm:block",children:"Pinterest"})]})}),(0,n.jsxs)("div",{className:"flex justify-end flex-1 px-2 items-center",children:[w.data&&(0,n.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:S,children:[(0,n.jsx)("a",{className:"hidden sm:block",children:"Create"}),(0,n.jsx)("div",{className:" sm:hidden",children:(0,n.jsx)(m.Z,{})})]}),(0,n.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,n.jsxs)("button",{tabIndex:0,className:"btn p-2 btn-ghost rounded-btn",children:[(0,n.jsx)("label",{className:"hidden sm:block",children:"Theme"}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(x.Z,{})})]}),(0,n.jsx)("ul",{tabIndex:0,className:"menu dropdown-content p-2 shadow rounded-box w-52 mt-4 grid grid-cols-1 overflow-y-scroll max-h-screen bg-neutral z-50",children:b&&b.map((e,s)=>(0,n.jsx)("li",{className:"text-neutral-content bg-neutral z-50",children:(0,n.jsx)("a",{onClick:E,children:e})},s))})]}),w.data?(0,n.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:Z,children:[(0,n.jsx)("a",{className:"hidden sm:block",children:"Sign Out"}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(f.Z,{})})]}):(0,n.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:L,children:[(0,n.jsx)("a",{className:"hidden sm:block",children:"Sign In"}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(p.Z,{})})]}),(0,n.jsx)("button",{className:"btn btn-ghost rounded-btn flex items-center justify-center",onClick:O,children:(0,n.jsx)("div",{className:"avatar aspect-square",children:y?(0,n.jsx)("div",{className:"rounded-full flex items-center w-7",children:(0,n.jsx)(g(),{src:y,alt:"avatar",width:"6",height:"6",className:"aspect-square w-2",id:"user_avatar"})}):(0,n.jsx)(h.Z,{className:"text-2xl"})})})]})]})};var w=t(7632);let k=()=>{var e,s,t,a;let l=null!==(e=(0,r.m)("notif/error"))&&void 0!==e?e:[],i=null!==(s=(0,r.m)("notif/warning"))&&void 0!==s?s:[],o=null!==(t=(0,r.m)("notif/info"))&&void 0!==t?t:[],d=null!==(a=(0,r.m)("notif/success"))&&void 0!==a?a:[],c=()=>{};return(0,n.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 w-full flex flex-col cursor-pointer gap-2",children:[l&&l.map(e=>(0,n.jsx)("div",{className:"alert alert-error shadow-lg animate-bounce w-fit",onClick:c,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{children:e.message})]})},(0,w.Z)())),i&&i.map(e=>(0,n.jsx)("div",{className:"alert alert-warning shadow-lg animate-bounce w-fit",onClick:c,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{children:e})]})},(0,w.Z)())),o&&o.map(e=>(0,n.jsx)("div",{className:"alert alert-info shadow-lg animate-bounce w-fit",onClick:c,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{children:e})]})},(0,w.Z)())),d&&d.map(e=>(0,n.jsx)("div",{className:"alert alert-success shadow-lg animate-bounce w-fit",onClick:c,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{children:e})]})},(0,w.Z)()))]})},N=e=>{let{children:s}=e;return(0,n.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 right-0 flex flex-col bg-base-100 text-base-content",children:[(0,n.jsx)(b,{}),(0,n.jsx)(i,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col",children:s}),(0,n.jsx)(k,{})]})}},5969:function(e,s,t){t.d(s,{t:function(){return o}});var n=t(5893),a=t(7997),l=t(9557),r=t(7294),i=t(5591);let o=e=>{var s;let{props:t}=e,{pin_uuid:o,board_uuid:d}=t,c=(0,a.a)(),u=null==c?void 0:null===(s=c.data)||void 0===s?void 0:s.boards,[h,m]=(0,r.useState)(),[x,p]=(0,r.useState)();(0,r.useEffect)(()=>{m(null==u?void 0:u[0])},[u]),(0,r.useEffect)(()=>{h&&p(0!==h.boards_pins.filter(e=>e.pin_uuid===o).length)},[h,o]);let f=async e=>{e.stopPropagation(),e.currentTarget.classList.add("loading","animate-pulse"),await (0,i.JG)("api/user/".concat(c.data.uuid),async()=>{await l.O.rpc("save_pin",{board_uuid:d,pin_uuid:o}).throwOnError()},{populateCache:!1})},v=async e=>{e.stopPropagation(),e.currentTarget.classList.add("loading","animate-pulse"),await (0,i.JG)("api/user/".concat(c.data.uuid),async()=>{await l.O.from("boards_pins").delete().eq("pin_uuid",o).eq("board_uuid",d)},{populateCache:!1})};return(0,n.jsxs)("div",{children:[void 0===x&&(0,n.jsx)("button",{className:"btn btn-info loading",children:"Loading"}),!0===x&&(0,n.jsx)("button",{className:"btn btn-info",onClick:v,children:"Saved"}),!1===x&&(0,n.jsx)("button",{className:"btn btn-accent",onClick:f,children:"Save"})]})}}}]);