"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{6833:function(e,t,r){let s;r.d(t,{G:function(){return x}});var i=r(5893),l=r(7294),n=r(9744),a=r(7997),o=r(8201),u=r(5675),d=r.n(u),c=r(1163);let f=new Map,p=new WeakMap,h=0;var v=r(5969);let m=e=>{var t;let{props:r}=e,{index:u,feeds:m,setPinsToDisplay:g,refetchFn:w,infinite:x}=r,{data:b}=(0,n.a)(),j=null==m?void 0:m.length,[y,N]=(0,l.useState)(),E=null==m?void 0:m[y],_=(0,c.useRouter)(),[S,R]=(0,l.useState)(!1),{entry:k,ref:L}=function({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:n,triggerOnce:a,skip:o,initialInView:u,fallbackInView:d,onChange:c}={}){var v;let[m,g]=l.useState(null),w=l.useRef(),[x,b]=l.useState({inView:!!u,entry:void 0});w.current=c,l.useEffect(()=>{let l;if(!o&&m)return l=function(e,t,r={},i=s){if(void 0===window.IntersectionObserver&&void 0!==i){let s=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}let{id:l,observer:n,elements:a}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var r;return`${t}_${"root"===t?(r=e.root)?(p.has(r)||(h+=1,p.set(r,h.toString())),p.get(r)):"0":e[t]}`}).toString(),r=f.get(t);if(!r){let s;let i=new Map,l=new IntersectionObserver(t=>{t.forEach(t=>{var r;let l=t.isIntersecting&&s.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=l),null==(r=i.get(t.target))||r.forEach(e=>{e(l,t)})})},e);s=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:l,elements:i},f.set(t,r)}return r}(r),o=a.get(e)||[];return a.has(e)||a.set(e,o),o.push(t),n.observe(e),function(){o.splice(o.indexOf(t),1),0===o.length&&(a.delete(e),n.unobserve(e)),0===a.size&&(n.disconnect(),f.delete(l))}}(m,(e,t)=>{b({inView:e,entry:t}),w.current&&w.current(e,t),t.isIntersecting&&a&&l&&(l(),l=void 0)},{root:n,rootMargin:i,threshold:e,trackVisibility:r,delay:t},d),()=>{l&&l()}},[Array.isArray(e)?e.toString():e,m,n,i,a,o,r,d,t]);let j=null==(v=x.entry)?void 0:v.target,y=l.useRef();m||!j||a||o||y.current===j||(y.current=j,b({inView:!!u,entry:void 0}));let N=[g,x.inView,x.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}({skip:S}),C=(0,a.a)(),I=null==C?void 0:null===(t=C.data)||void 0===t?void 0:t.boards,[M,V]=(0,l.useState)(),[z,O]=(0,l.useState)(!1);(0,l.useEffect)(()=>(u.current++,()=>{u.current--}),[u]),(0,l.useEffect)(()=>{N(u.current)},[]),(0,l.useEffect)(()=>{(null==k?void 0:k.isIntersecting)&&(g(e=>[...e,"dummy"]),R(!0))},[null==k?void 0:k.isIntersecting,g]),(0,l.useEffect)(()=>{y&&j<=y+30&&(x?w():R(!0))},[y,j,x,w]),(0,l.useEffect)(()=>{V(null==I?void 0:I[0])},[I]);let W=e=>{e.stopPropagation();let t=JSON.parse(e.target.value);V(t)},q=e=>{e.currentTarget.classList.add("animate-ping"),_.push("/pin/".concat(E.uuid))},A=e=>{e.classList.remove("animate-pulse"),e.removeEventListener("onLoadingComplete",A)},P=e=>{e.stopPropagation(),O(!0)},B=e=>{e.stopPropagation(),O(!1)};return(0,i.jsxs)("div",{className:"flex flex-col relative gap-1 hover:cursor-zoom-in",onClick:q,ref:L,children:[!E&&(0,i.jsx)("div",{className:"w-72 max-w-full aspect-square bg-neutral animate-pulse rounded-3xl"}),E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-72 max-w-full h-auto relative",onMouseEnter:P,onMouseLeave:B,children:[(0,i.jsx)(d(),{src:E.image_url,alt:"pinImage",width:300,height:300,sizes:"300px",priority:!0,placeholder:"blur",blurDataURL:E.loading_image_url,className:"h-auto w-full rounded-3xl bg-neutral animate-pulse",onLoadingComplete:A}),b&&z&&(0,i.jsxs)("div",{className:"absolute p-2 top-0 right-0 left-0 bottom-0 z-20 hover:backdrop-brightness-50 flex justify-between rounded-3xl",children:[(0,i.jsx)("select",{className:"select max-w-xs bg-neutral text-neutral-content",onChange:W,children:I&&I.map((e,t)=>(0,i.jsx)("option",{value:JSON.stringify(e),children:e.title},t))}),M&&(0,i.jsx)(v.t,{props:{pin_uuid:E.uuid,board_uuid:M.uuid}})]})]}),(0,i.jsx)("div",{className:"pl-3 pr-3 font-bold overflow-clip overflow-ellipsis",children:E.title}),(0,i.jsxs)("div",{className:"flex max-w-full items-center gap-2 pl-3 pr-3 overflow-clip overflow-ellipsis",children:[(0,i.jsx)("div",{className:"avatar aspect-square",children:(0,i.jsx)("div",{className:"w-8 rounded-full flex items-center",children:E.users.profile_picture_url?(0,i.jsx)(d(),{src:E.users.profile_picture_url,alt:"avatar",width:"0",height:"0",className:"w-full aspect-square",id:"profilePicture"}):(0,i.jsx)(o.Z,{className:"w-full aspect-square"})})}),(0,i.jsx)("div",{className:"overflow-ellipsis overflow-clip",children:E.users.username})]})]})]})},g=e=>{let{props:t}=e,[r,s]=(0,l.useState)(["dummy"]);return(0,i.jsx)("div",{className:"h-max flex flex-col gap-5 w-72 max-w-full overflow-hidden",children:r&&r.map((e,r)=>(0,i.jsx)(m,{props:{...t,setPinsToDisplay:s}},r))})},w=300;window.innerWidth<=500&&(w=window.innerWidth/2);let x=e=>{let{props:t}=e,{feeds:r}=t,s=(0,l.useRef)(-1),[n,a]=(0,l.useState)(["dummy"]);return(0,l.useEffect)(()=>{let e=e=>{let t=[],r=e?e.target.innerWidth:window.innerWidth,s=Math.floor(r/w);for(let e=0;e<s;e++)t.push("dummy");a(t)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,l.useEffect)(()=>{let e=window.innerWidth,t=Math.floor(e/w),r=[];for(let e=0;e<t;e++)r.push("dummy");a(r)},[]),(0,i.jsx)("div",{className:"w-full",children:r&&(0,i.jsx)("div",{className:"flex gap-1 md:gap-5 justify-center p-1 md:p-5",children:0!==r.length&&n&&n.map((e,r)=>(0,i.jsx)(g,{props:{...t,index:s}},r))})})}}}]);