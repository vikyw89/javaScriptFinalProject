(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{9369:function(e,t,a){"use strict";var r=a(4836);t.Z=void 0;var s=r(a(4938)),l=a(5893),i=(0,s.default)((0,l.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.Z=i},6307:function(e,t,a){"use strict";var r=a(4836);t.Z=void 0;var s=r(a(4938)),l=a(5893),i=(0,s.default)((0,l.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=i},1213:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pin/[pin_uuid]",function(){return a(2178)}])},3263:function(e,t,a){"use strict";a.d(t,{T:function(){return g}});var r=a(5893),s=a(1163),l=a(7294),i=a(554);let n=()=>{let e=(0,s.useRouter)(),t=(0,i.ay)("route"),a=(0,i.ay)("signIn"),n=(0,i.ay)("signOut"),o=(0,i.ay)("auth"),d=(0,i.ay)("boards"),c=(0,i.ay)("pin"),u=(0,i.ay)("initialize"),h=(0,i.ay)("downloadPins"),m=(0,i.ay)("users");return(0,l.useEffect)(()=>{let t=()=>{(0,i.cA)("route.loading",!0)},a=()=>{(0,i.cA)("route.loading",!1)};return e.events.on("routeChangeStart",t),e.events.on("routeChangeComplete",a),()=>{e.events.off("routeChangeStart",t),e.events.off("routeChangeComplete",a)}},[e]),(0,r.jsx)("div",{className:"fixed z-50 top-12 w-full flex",children:(t.loading||a.loading||n.loading||o.loading||d.loading||c.loading||u.loading||h.loading||m.loading)&&(0,r.jsx)("progress",{className:"progress progress-accent"})})};var o=a(9557),d=a(5675),c=a.n(d),u=a(8201),h=a(6540),m=a(3540),x=a(9485),p=a(5328);let f=()=>{var e,t,a;let l=(0,i.C0)("theme"),n=(0,i.ay)("auth"),d=(0,s.useRouter)(),f=null==n?void 0:null===(e=n.data)||void 0===e?void 0:null===(t=e.user)||void 0===t?void 0:null===(a=t.user_metadata)||void 0===a?void 0:a.avatar_url,v=()=>{(0,i.cA)("show.signInComponent",!0)},g=()=>{(0,i.Gt)("signOut",async()=>{let{error:e}=await o.O.auth.signOut();return e})},w=()=>{d.push("/")},j=()=>{d.push("/createPin")},b=async e=>{let t=e.target.textContent;await (0,i.JX)("users",async()=>{let e=await o.O.from("users").update({theme:t}).eq("uuid",n.data.user.id).select();return e.data[0]}),(0,i.zT)("users.data.theme",t)};return(0,r.jsxs)("div",{className:"flex bg-neutral z-20 items-center text-neutral-content",children:[(0,r.jsx)("div",{className:"flex-1 px-2 lg:flex-none flex items-center gap-1 cursor-pointer",children:(0,r.jsxs)("div",{onClick:w,className:"lg:flex-none flex items-center gap-1 cursor-pointer",children:[(0,r.jsx)("div",{className:"w-12",children:(0,r.jsx)(c(),{alt:"pinterest logo",src:"https://hffebrjtrzopihuffrxv.supabase.co/storage/v1/object/public/assets/p-logo-lowres.png",width:"0",height:"0",sizes:"100vw",className:"w-auto"})}),(0,r.jsx)("a",{className:"text-lg font-bold hidden sm:block",children:"Pinterest"})]})}),(0,r.jsxs)("div",{className:"flex justify-end flex-1 px-2 items-center",children:[n.data&&(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:j,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Create"}),(0,r.jsx)("div",{className:" sm:hidden",children:(0,r.jsx)(h.Z,{})})]}),(0,r.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,r.jsxs)("button",{tabIndex:0,className:"btn p-2 btn-ghost rounded-btn",children:[(0,r.jsx)("label",{className:"hidden sm:block",children:"Theme"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(p.Z,{})})]}),(0,r.jsx)("ul",{tabIndex:0,className:"menu dropdown-content p-2 shadow rounded-box w-52 mt-4 grid grid-cols-1 overflow-y-scroll max-h-screen bg-neutral",children:l.map((e,t)=>(0,r.jsx)("li",{className:"text-neutral-content bg-neutral",children:(0,r.jsx)("a",{onClick:b,children:e})},t))})]}),n.data?(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:g,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Sign Out"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(m.Z,{})})]}):(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:v,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Sign In"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(x.Z,{})})]}),(0,r.jsx)("button",{className:"btn btn-ghost rounded-btn",children:(0,r.jsx)("div",{className:"avatar aspect-square",children:(0,r.jsx)("div",{className:"w-8 rounded-full flex items-center",children:f?(0,r.jsx)(c(),{src:f,alt:"avatar",width:"0",height:"0",className:"w-auto h-auto",id:"user_avatar"}):(0,r.jsx)(u.Z,{className:"text-3xl"})})})})]})]})},v=()=>{let e=(0,i.ay)("auth"),t=(0,i.ay)("boards"),a=(0,i.ay)("pin"),s=(0,i.ay)("initialize");return(0,r.jsxs)("div",{className:"fixed bottom-0 left-0",children:[e.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:e.error.message})]})}),t.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:t.error.message})]})}),a.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:a.error.message})]})}),s.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:s.error.message})]})})]})},g=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 right-0 flex flex-col bg-base-100 text-base-content",children:[(0,r.jsx)(f,{}),(0,r.jsx)(n,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col",children:t}),(0,r.jsx)(v,{})]})}},2178:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(5893),s=a(3263),l=a(554),i=a(9369),n=a(5675),o=a.n(n),d=a(7294),c=a(9557),u=a(3366),h=a(7462),m=a(6010),x=a(4780),p=a(1796),f=a(2641),v=a(8215),g=a(1588),w=a(4867);function j(e){return(0,w.Z)("MuiDivider",e)}(0,g.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);let b=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],N=e=>{let{absolute:t,children:a,classes:r,flexItem:s,light:l,orientation:i,textAlign:n,variant:o}=e;return(0,x.Z)({root:["root",t&&"absolute",o,l&&"light","vertical"===i&&"vertical",s&&"flexItem",a&&"withChildren",a&&"vertical"===i&&"withChildrenVertical","right"===n&&"vertical"!==i&&"textAlignRight","left"===n&&"vertical"!==i&&"textAlignLeft"],wrapper:["wrapper","vertical"===i&&"wrapperVertical"]},j,r)},_=(0,f.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.absolute&&t.absolute,t[a.variant],a.light&&t.light,"vertical"===a.orientation&&t.vertical,a.flexItem&&t.flexItem,a.children&&t.withChildren,a.children&&"vertical"===a.orientation&&t.withChildrenVertical,"right"===a.textAlign&&"vertical"!==a.orientation&&t.textAlignRight,"left"===a.textAlign&&"vertical"!==a.orientation&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>(0,h.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,p.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>(0,h.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>(0,h.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>(0,h.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),y=(0,f.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.wrapper,"vertical"===a.orientation&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>(0,h.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),k=d.forwardRef(function(e,t){let a=(0,v.Z)({props:e,name:"MuiDivider"}),{absolute:s=!1,children:l,className:i,component:n=l?"div":"hr",flexItem:o=!1,light:d=!1,orientation:c="horizontal",role:x="hr"!==n?"separator":void 0,textAlign:p="center",variant:f="fullWidth"}=a,g=(0,u.Z)(a,b),w=(0,h.Z)({},a,{absolute:s,component:n,flexItem:o,light:d,orientation:c,role:x,textAlign:p,variant:f}),j=N(w);return(0,r.jsx)(_,(0,h.Z)({as:n,className:(0,m.Z)(j.root,i),role:x,ref:t,ownerState:w},g,{children:l?(0,r.jsx)(y,{className:j.wrapper,ownerState:w,children:l}):null}))});var C=a(6307);let z=()=>{let e=(0,l.ay)("auth",{initialState:{loading:!0}}),t=e.data.user.user_metadata.avatar_url,a=(0,l.ay)("pinDetail"),s=(0,l.ay)("boards"),n=(0,l.ay)("isFollower"),u=a.data.users.uuid,h=e.data.user.id,m=a.data.uuid,x=a.data.pins_comments,[p,f]=(0,d.useState)(""),[v,g]=(0,d.useState)(),w=e=>{g(JSON.parse(e.target.value))};(0,d.useEffect)(()=>{s.data||(0,l.JX)("boards",async()=>{let t=await c.O.from("boards").select().filter("creator_uuid","eq",e.data.user.id).throwOnError(),a=t.data;return g(a),a})},[e.data.user.id,s.data]);let j=()=>{};(0,d.useEffect)(()=>{e.data&&(0,l.JX)("boards",async()=>{let t=await c.O.from("boards").select().filter("creator_uuid","eq",e.data.user.id).throwOnError();return t.data})},[e.data]),(0,d.useEffect)(()=>{e.data&&(0,l.JX)("isFollower",async()=>{let e=await c.O.from("users_followers").select("count").eq("user_uuid",u).eq("follower_uuid",h).throwOnError(),t=0!==e.data[0].count;return t})},[e.data,u,h]);let b=()=>{e.data&&(0,l.JX)("followUser",async()=>{let e=await c.O.from("users_followers").upsert({user_uuid:u,follower_uuid:h}).select().throwOnError(),t=e.data[0];return(0,l.zT)("isFollower.data",!0),(0,l.zT)("pinDetail.data.users.users_followers[0].count",e=>e+1),t})},N=()=>{e.data&&(0,l.JX)("unfollowUser",async()=>{let e=await c.O.from("users_followers").delete().eq("user_uuid",u).eq("follower_uuid",h).select();return(0,l.zT)("isFollower.data",!1),(0,l.zT)("pinDetail.data.users.users_followers[0].count",e=>e-1),e})},_=e=>{f(e.target.value)},y=()=>{e.data&&((0,l.JX)("sendComment",async()=>{let e=await c.O.from("pins_comments").insert({comment:p,creator_uuid:h,pin_uuid:m}).select(),t=e.data[0];return await (0,l.JX)("pinDetail",async()=>{let e=await c.O.from("pins").select("\n                    *,\n                    users(*,users_followers!users_followers_user_uuid_fkey(count)),\n                    pins_comments(*,users(*))\n                    ").eq("uuid",m).eq("pins_comments.pin_uuid",m),t=e.data[0];return t}),t}),f(""))};return(0,r.jsxs)("div",{className:"bg-neutral flex flex-wrap text-neutral-content justify-center h-fit rounded-box",children:[(0,r.jsx)("div",{className:"max-w-[500px]",children:(0,r.jsx)(o(),{src:a.data.image_url,alt:"pinImage",height:0,width:0,sizes:"100vw",className:"w-[500px] aspect-auto rounded-l-3xl bg-neutral-focus flex"})}),(0,r.jsxs)("div",{className:"flex max-w-[500px] flex-col rounded-box bg-neutral p-5 gap-1 justify-between relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[(0,r.jsx)("button",{className:"btn btn-ghost p-0 btn-circle",children:(0,r.jsx)(i.Z,{})}),(0,r.jsx)("div",{className:"flex-1"}),v&&(0,r.jsx)("select",{className:"select max-w-xs bg-neutral text-neutral-content",onChange:w,children:s.data.map((e,t)=>(0,r.jsx)("option",{value:JSON.stringify(e),children:e.title},t))}),(0,r.jsx)("button",{onClick:j,className:"btn btn-primary rounded-btn",children:"Save"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:a.data.link_url})}),(0,r.jsx)("div",{className:"font-bold",children:a.data.title}),(0,r.jsx)("div",{children:a.data.description}),(0,r.jsxs)("div",{className:"flex gap-3 w-full flex-wrap",children:[(0,r.jsx)(o(),{src:a.data.users.profile_picture_url,alt:"pfp",height:0,width:0,sizes:"100vw",className:"w-12 aspect-square rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:a.data.users.username}),(0,r.jsxs)("div",{children:[a.data.users.users_followers[0].count," followers"]})]}),(0,r.jsx)("div",{className:"flex-1 text-right",children:n.data?(0,r.jsx)("button",{className:"btn btn-primary text-primary-content rounded-btn max-sm:w-full",onClick:N,children:"Following"}):(0,r.jsx)("button",{className:"btn btn-primary text-primary-content rounded-btn max-sm:w-full",onClick:b,children:"Follow"})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-bold",children:"Comments"}),x&&(0,r.jsx)("div",{children:x.map((e,t)=>(0,r.jsxs)("div",{className:"flex max-h-full gap-2 p-2",children:[(0,r.jsx)(o(),{src:e.users.profile_picture_url,alt:"profile_picture",height:0,width:0,sizes:"100vw",className:"w-8 h-8 aspect-square rounded-full"}),(0,r.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,r.jsxs)("span",{className:"font-bold",children:[e.users.username," :\xa0\xa0"]}),(0,r.jsx)("p",{className:"break-all",children:e.comment})]})]},t))}),!x&&(0,r.jsx)("div",{children:"No comments yet! Add one to start the conversation."})]}),(0,r.jsx)(k,{}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between",children:[t&&(0,r.jsx)(o(),{src:t,alt:"avatar",height:0,width:0,sizes:"100vw",className:"w-12 aspect-square rounded-box"}),(0,r.jsx)("input",{type:"text",placeholder:"Add a comment",className:"input input-bordered input-primary rounded-box bg-neutral-focus w-full",onChange:_,value:p}),(0,r.jsx)("button",{className:"btn btn-primary rounded-btn btn-circle",onClick:y,children:(0,r.jsx)(C.Z,{})})]})]})]})};var Z=a(1163);let O=()=>{let e=(0,l.ay)("auth",{initialState:{loading:!0}}),t=(0,Z.useRouter)(),{pin_uuid:a}=t.query,i=(0,l.ay)("pinDetail");return(0,d.useEffect)(()=>{e.data&&(0,l.JX)("pinDetail",async()=>{let e=await c.O.from("pins").select("\n                *,\n                users(*,users_followers!users_followers_user_uuid_fkey(count)),\n                pins_comments(*,users(*))\n                ").eq("uuid",a).eq("pins_comments.pin_uuid",a),t=e.data[0];return t})},[a,e.data]),(0,r.jsx)(s.T,{children:e.data&&(0,r.jsxs)("div",{className:"flex justify-center h-screen p-5",children:[i.data&&(0,r.jsx)(z,{}),i.loading&&(0,r.jsx)("div",{className:"w-96 ",children:(0,r.jsx)("div",{className:"animate-pulse w-96 h-96 rounded-3xl bg-neutral-focus"})})]})})};var S=O}},function(e){e.O(0,[969,774,888,179],function(){return e(e.s=1213)}),_N_E=e.O()}]);