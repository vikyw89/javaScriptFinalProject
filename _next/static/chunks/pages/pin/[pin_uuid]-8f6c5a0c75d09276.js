(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{9369:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var s=a(r(4938)),l=r(5893),n=(0,s.default)((0,l.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.Z=n},6307:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var s=a(r(4938)),l=r(5893),n=(0,s.default)((0,l.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=n},1213:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pin/[pin_uuid]",function(){return r(7463)}])},1243:function(e,t,r){"use strict";r.d(t,{T:function(){return _}});var a=r(5893),s=r(9744),l=r(1163),n=r(7294),i=r(8621);let o=()=>{let e=(0,l.useRouter)(),t=(0,i.ay)("route"),r=(0,i.ay)("signIn"),o=(0,i.ay)("signOut"),d=(0,s.a)(),c=(0,i.ay)("boards"),u=(0,i.ay)("pin"),h=(0,i.ay)("initialize"),m=(0,i.ay)("downloadPins"),x=(0,i.ay)("users");return(0,n.useEffect)(()=>{let t=()=>{(0,i.zT)("route.loading",!0)},r=()=>{(0,i.zT)("route.loading",!1)};return e.events.on("routeChangeStart",t),e.events.on("routeChangeComplete",r),()=>{e.events.off("routeChangeStart",t),e.events.off("routeChangeComplete",r)}},[e]),(0,a.jsx)("div",{className:"fixed z-50 top-12 w-full flex",children:(t.loading||r.loading||o.loading||d.loading||c.loading||u.loading||h.loading||m.loading||x.loading)&&(0,a.jsx)("progress",{className:"progress progress-accent"})})};var d=r(9770);let c=()=>{let e=(0,d.Z)("theme",()=>["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"].sort((e,t)=>e>t?1:-1));return e};var u=r(7997),h=r(9557),m=r(8201),x=r(6540),p=r(5328),v=r(9485),f=r(3540),g=r(5675),w=r.n(g),j=r(5591);let b=()=>{var e,t,r;let n=c(),o=(0,s.a)(),d=(0,u.a)(),g=(0,l.useRouter)(),b=null==o?void 0:null===(e=o.data)||void 0===e?void 0:null===(t=e.user)||void 0===t?void 0:null===(r=t.user_metadata)||void 0===r?void 0:r.avatar_url,N=()=>{(0,i.zT)("show.signInComponent",!0)},_=()=>{(0,i.JX)("signOut",async()=>{let{error:e}=await h.O.auth.signOut();return e})},y=()=>{g.push("/")},k=()=>{g.push("/createPin")},C=e=>{let t=e.target.textContent,r={optimisticData:{...d.data,theme:t}};(0,j.JG)("user",async()=>{await h.O.from("users").update({theme:t}).eq("uuid",o.data.user.id).throwOnError()},r)},z=()=>{g.push("/profile")};return(0,a.jsxs)("div",{className:"flex bg-neutral z-20 items-center text-neutral-content",children:[(0,a.jsx)("div",{className:"flex-1 px-2 lg:flex-none flex items-center gap-1 cursor-pointer",children:(0,a.jsxs)("div",{onClick:y,className:"lg:flex-none flex items-center gap-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"w-12",children:(0,a.jsx)(w(),{alt:"pinterest logo",src:"https://hffebrjtrzopihuffrxv.supabase.co/storage/v1/object/public/assets/p-logo-lowres.png",width:"0",priority:!0,height:"0",sizes:"100vw",className:"w-auto"})}),(0,a.jsx)("a",{className:"text-lg font-bold hidden sm:block",children:"Pinterest"})]})}),(0,a.jsxs)("div",{className:"flex justify-end flex-1 px-2 items-center",children:[o.data&&(0,a.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:k,children:[(0,a.jsx)("a",{className:"hidden sm:block",children:"Create"}),(0,a.jsx)("div",{className:" sm:hidden",children:(0,a.jsx)(x.Z,{})})]}),(0,a.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,a.jsxs)("button",{tabIndex:0,className:"btn p-2 btn-ghost rounded-btn",children:[(0,a.jsx)("label",{className:"hidden sm:block",children:"Theme"}),(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)(p.Z,{})})]}),(0,a.jsx)("ul",{tabIndex:0,className:"menu dropdown-content p-2 shadow rounded-box w-52 mt-4 grid grid-cols-1 overflow-y-scroll max-h-screen bg-neutral",children:n.data&&n.data.map((e,t)=>(0,a.jsx)("li",{className:"text-neutral-content bg-neutral",children:(0,a.jsx)("a",{onClick:C,children:e})},t))})]}),o.data?(0,a.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:_,children:[(0,a.jsx)("a",{className:"hidden sm:block",children:"Sign Out"}),(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)(f.Z,{})})]}):(0,a.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:N,children:[(0,a.jsx)("a",{className:"hidden sm:block",children:"Sign In"}),(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)(v.Z,{})})]}),(0,a.jsx)("button",{className:"btn btn-ghost rounded-btn",onClick:z,children:(0,a.jsx)("div",{className:"avatar aspect-square",children:(0,a.jsx)("div",{className:"w-8 rounded-full flex items-center",children:b?(0,a.jsx)(w(),{src:b,alt:"avatar",width:"0",height:"0",className:"w-auto h-auto",id:"user_avatar"}):(0,a.jsx)(m.Z,{className:"text-3xl"})})})})]})]})},N=()=>{let e=(0,s.a)(),t=(0,i.ay)("boards"),r=(0,i.ay)("pin"),l=(0,i.ay)("initialize"),n=(0,i.ay)("user");return(0,a.jsxs)("div",{className:"fixed bottom-0 left-0",children:[e.error&&(0,a.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:e.error.message})]})}),t.error&&(0,a.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:t.error.message})]})}),r.error&&(0,a.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:r.error.message})]})}),l.error&&(0,a.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:l.error.message})]})}),n.error&&(0,a.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:n.error.message})]})})]})},_=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 right-0 flex flex-col bg-base-100 text-base-content",children:[(0,a.jsx)(b,{}),(0,a.jsx)(o,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col",children:t}),(0,a.jsx)(N,{})]})}},7463:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var a=r(5893),s=r(1243),l=r(9557),n=r(9369),i=r(5675),o=r.n(i),d=r(7294),c=r(8621),u=r(9744),h=r(6307),m=r(3366),x=r(7462),p=r(6010),v=r(4780),f=r(1796),g=r(2641),w=r(8215),j=r(1588),b=r(4867);function N(e){return(0,b.Z)("MuiDivider",e)}(0,j.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);let _=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],y=e=>{let{absolute:t,children:r,classes:a,flexItem:s,light:l,orientation:n,textAlign:i,variant:o}=e;return(0,v.Z)({root:["root",t&&"absolute",o,l&&"light","vertical"===n&&"vertical",s&&"flexItem",r&&"withChildren",r&&"vertical"===n&&"withChildrenVertical","right"===i&&"vertical"!==n&&"textAlignRight","left"===i&&"vertical"!==n&&"textAlignLeft"],wrapper:["wrapper","vertical"===n&&"wrapperVertical"]},N,a)},k=(0,g.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>(0,x.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,f.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>(0,x.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>(0,x.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>(0,x.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),C=(0,g.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>(0,x.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),z=d.forwardRef(function(e,t){let r=(0,w.Z)({props:e,name:"MuiDivider"}),{absolute:s=!1,children:l,className:n,component:i=l?"div":"hr",flexItem:o=!1,light:d=!1,orientation:c="horizontal",role:u="hr"!==i?"separator":void 0,textAlign:h="center",variant:v="fullWidth"}=r,f=(0,m.Z)(r,_),g=(0,x.Z)({},r,{absolute:s,component:i,flexItem:o,light:d,orientation:c,role:u,textAlign:h,variant:v}),j=y(g);return(0,a.jsx)(k,(0,x.Z)({as:i,className:(0,p.Z)(j.root,n),role:u,ref:t,ownerState:g},f,{children:l?(0,a.jsx)(C,{className:j.wrapper,ownerState:g,children:l}):null}))});var Z=r(1163);let O=()=>{var e,t,r,s,n;let i=(0,u.a)(),m=(0,Z.useRouter)(),{pin_uuid:x}=m.query,p=(0,c.ay)("pin".concat(x)),v=(0,c.ay)("sendComment"),[f,g]=(0,d.useState)(""),w=null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.pins_comments,j=null==i?void 0:null===(t=i.data)||void 0===t?void 0:null===(r=t.user)||void 0===r?void 0:null===(s=r.user_metadata)||void 0===s?void 0:s.avatar_url,b=null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.user.id,N=e=>{g(e.target.value)},_=()=>{f&&b&&x&&(0,c.JX)("sendComment",async()=>{let e=await l.O.from("pins_comments").insert({comment:f,creator_uuid:b,pin_uuid:x}).select().throwOnError(),t=e.data[0];return g(""),t})};return(0,d.useEffect)(()=>{v.data&&x&&(0,c.JX)("pin".concat(x),async()=>{let e=await l.O.from("pins").select("\n                    *,\n                    users(*,users_followers!users_followers_user_uuid_fkey(count)),\n                    pins_comments(*,users(*))\n                    ").eq("uuid",x).eq("pins_comments.pin_uuid",x).throwOnError(),t=e.data[0];return t},{deleteExistingData:!1})},[v.data,x]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-bold",children:"Comments"}),w&&(0,a.jsx)("div",{children:w.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 p-2 w-full max-w-lg",children:[(0,a.jsx)(o(),{src:e.users.profile_picture_url,alt:"profile_picture",height:0,width:0,sizes:"100vw",className:"w-8 h-8 aspect-square rounded-full"}),(0,a.jsxs)("div",{className:"flex w-full max-w-lg flex-wrap",children:[(0,a.jsxs)("span",{className:"font-bold",children:[e.users.username," :\xa0\xa0"]}),(0,a.jsx)("p",{className:"break-all",children:e.comment})]})]},t))}),!w&&(0,a.jsx)("div",{children:"No comments yet! Add one to start the conversation."})]}),(0,a.jsx)(z,{}),(0,a.jsxs)("div",{className:"flex gap-2 justify-between",children:[j&&(0,a.jsx)(o(),{src:j,alt:"avatar",height:0,width:0,sizes:"100vw",className:"w-12 aspect-square rounded-box"}),(0,a.jsx)("input",{type:"text",placeholder:"Add a comment",className:"input input-bordered input-primary rounded-box bg-neutral-focus w-full",onChange:N,value:f}),(0,a.jsx)("button",{className:"btn btn-primary rounded-btn btn-circle",onClick:_,children:(0,a.jsx)(h.Z,{})})]})]})},q=()=>{var e,t,r,s;let n=(0,u.a)(),i=(0,Z.useRouter)(),{pin_uuid:h}=i.query,m=(0,c.ay)("pin".concat(h)),x=(0,c.ay)("isFollower"),p=null==m?void 0:null===(e=m.data)||void 0===e?void 0:null===(t=e.users)||void 0===t?void 0:t.uuid,v=null==n?void 0:null===(r=n.data)||void 0===r?void 0:null===(s=r.user)||void 0===s?void 0:s.id;(0,d.useEffect)(()=>{m.data&&p&&v&&(0,c.JX)("isFollower",async()=>{let e=await l.O.from("users_followers").select("count").eq("user_uuid",p).eq("follower_uuid",v).throwOnError(),t=0!==e.data[0].count;return t},{deleteExistingData:!1})},[m.data,p,v]);let f=()=>{m.data&&p&&v&&((0,c.JX)("followUser",async()=>{let e=await l.O.from("users_followers").upsert({user_uuid:p,follower_uuid:v}).select().throwOnError(),t=e.data[0];return t}),(0,c.zT)("isFollower",!0),(0,c.zT)("pin".concat(h,".users.users_followers[0].count"),e=>e+1))},g=()=>{m.data&&p&&v&&((0,c.JX)("unfollowUser",async()=>{let e=await l.O.from("users_followers").delete().eq("user_uuid",p).eq("follower_uuid",v).select().throwOnError();return e}),(0,c.zT)("isFollower",!1),(0,c.zT)("pin".concat(h,".users.users_followers[0].count"),e=>e-1))};return(0,a.jsxs)("div",{className:"flex gap-3 w-full flex-wrap",children:[m.data&&(0,a.jsx)(o(),{src:m.data.users.profile_picture_url,alt:"pfp",height:0,width:0,sizes:"100vw",className:"w-12 aspect-square rounded-full"}),m.data&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold",children:m.data.users.username}),(0,a.jsxs)("div",{children:[m.data.users.users_followers[0].count," followers"]})]}),(0,a.jsx)("div",{className:"flex-1 text-right",children:x.data?(0,a.jsx)("button",{className:"btn btn-primary text-primary-content rounded-btn max-sm:w-full",onClick:g,children:"Following"}):(0,a.jsx)("button",{className:"btn btn-primary text-primary-content rounded-btn max-sm:w-full",onClick:f,children:"Follow"})})]})},E=()=>{var e,t;let r=(0,u.a)(),s=null==r?void 0:null===(e=r.data)||void 0===e?void 0:null===(t=e.user)||void 0===t?void 0:t.id,i=(0,Z.useRouter)(),{pin_uuid:h}=i.query,m=(0,c.ay)("pin".concat(h)),x=(0,c.ay)("boards"),[p,v]=(0,d.useState)(),f=e=>{v(JSON.parse(e.target.value))};(0,d.useEffect)(()=>{!x.data&&s&&(0,c.JX)("boards",async()=>{let e=await l.O.from("boards").select().eq("creator_uuid",s).throwOnError(),t=e.data;return v(t),t})},[s,x.data]);let g=()=>{};return(0,a.jsx)("div",{className:"flex justify-center p-5",children:(0,a.jsxs)("div",{className:"flex flex-wrap text-neutral-content items-start justify-center",children:[(0,a.jsx)("div",{className:"max-w-lg relative rounded-l-3xl bg-neutral-focus",children:m.data&&(0,a.jsx)(o(),{src:m.data.image_url,alt:"pinDetailImage",width:500,height:500,placeholder:"blur",blurDataURL:m.data.loading_image_url,className:"rounded-l-3xl"})}),(0,a.jsxs)("div",{className:"max-w-lg flex flex-col rounded-r-3xl bg-neutral p-5 gap-1 w-screen min-h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)("button",{className:"btn btn-ghost p-0 btn-circle",children:(0,a.jsx)(n.Z,{})}),(0,a.jsx)("div",{className:"flex-1"}),p&&(0,a.jsx)("select",{className:"select max-w-xs bg-neutral text-neutral-content",onChange:f,children:x.data.map((e,t)=>(0,a.jsx)("option",{value:JSON.stringify(e),children:e.title},t))}),(0,a.jsx)("button",{onClick:g,className:"btn btn-primary rounded-btn",children:"Save"})]}),m.data&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"underline",children:(0,a.jsx)("a",{href:m.data.link_url,children:m.data.link_url})}),(0,a.jsx)("div",{className:"font-bold",children:m.data.title}),(0,a.jsx)("div",{children:m.data.description})]}),(0,a.jsx)(q,{}),(0,a.jsx)(O,{})]})]})})},L=()=>{let e=(0,u.a)(),t=(0,Z.useRouter)(),{pin_uuid:r}=t.query;return(0,d.useEffect)(()=>{e.data&&r&&(0,c.JX)("pin".concat(r),async()=>{let e=await l.O.from("pins").select("\n                *,\n                users(*,users_followers!users_followers_user_uuid_fkey(count)),\n                pins_comments(*,users(*))\n                ").eq("uuid",r).eq("pins_comments.pin_uuid",r),t=e.data[0];return t})},[r,e.data]),(0,a.jsx)(s.T,{children:e.data&&r&&(0,a.jsx)(E,{})})};var R=L}},function(e){e.O(0,[725,774,888,179],function(){return e(e.s=1213)}),_N_E=e.O()}]);