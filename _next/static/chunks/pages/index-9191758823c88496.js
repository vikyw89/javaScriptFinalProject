(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4507)}])},1243:function(e,s,t){"use strict";t.d(s,{T:function(){return k}});var r=t(5893),n=t(9744),a=t(1163),l=t(7294),i=t(8621);let o=()=>{let e=(0,a.useRouter)(),s=(0,i.ay)("route"),t=(0,i.ay)("signIn"),o=(0,i.ay)("signOut"),d=(0,n.a)(),c=(0,i.ay)("boards"),u=(0,i.ay)("pin"),h=(0,i.ay)("initialize"),x=(0,i.ay)("downloadPins"),m=(0,i.ay)("users");return(0,l.useEffect)(()=>{let s=()=>{(0,i.zT)("route.loading",!0)},t=()=>{(0,i.zT)("route.loading",!1)};return e.events.on("routeChangeStart",s),e.events.on("routeChangeComplete",t),()=>{e.events.off("routeChangeStart",s),e.events.off("routeChangeComplete",t)}},[e]),(0,r.jsx)("div",{className:"fixed z-50 top-12 w-full flex",children:(s.loading||t.loading||o.loading||d.loading||c.loading||u.loading||h.loading||x.loading||m.loading)&&(0,r.jsx)("progress",{className:"progress progress-accent"})})};var d=t(9770);let c=()=>{let e=(0,d.Z)("theme",()=>["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"].sort((e,s)=>e>s?1:-1));return e};var u=t(7997),h=t(9557),x=t(8201),m=t(6540),g=t(5328),p=t(9485),f=t(3540),j=t(5675),v=t.n(j),w=t(5591);let b=()=>{var e,s,t;let l=c(),o=(0,n.a)(),d=(0,u.a)(),j=(0,a.useRouter)(),b=null==o?void 0:null===(e=o.data)||void 0===e?void 0:null===(s=e.user)||void 0===s?void 0:null===(t=s.user_metadata)||void 0===t?void 0:t.avatar_url,N=()=>{(0,i.zT)("show.signInComponent",!0)},k=()=>{(0,i.JX)("signOut",async()=>{let{error:e}=await h.O.auth.signOut();return e})},y=()=>{j.push("/")},C=()=>{j.push("/createPin")},_=e=>{let s=e.target.textContent,t={optimisticData:{...d.data,theme:s}};(0,w.JG)("user",async()=>{await h.O.from("users").update({theme:s}).eq("uuid",o.data.user.id).throwOnError()},t)},z=()=>{j.push("/profile")};return(0,r.jsxs)("div",{className:"flex bg-neutral z-20 items-center text-neutral-content",children:[(0,r.jsx)("div",{className:"flex-1 px-2 lg:flex-none flex items-center gap-1 cursor-pointer",children:(0,r.jsxs)("div",{onClick:y,className:"lg:flex-none flex items-center gap-1 cursor-pointer",children:[(0,r.jsx)("div",{className:"w-12",children:(0,r.jsx)(v(),{alt:"pinterest logo",src:"https://hffebrjtrzopihuffrxv.supabase.co/storage/v1/object/public/assets/p-logo-lowres.png",width:"0",priority:!0,height:"0",sizes:"100vw",className:"w-auto"})}),(0,r.jsx)("a",{className:"text-lg font-bold hidden sm:block",children:"Pinterest"})]})}),(0,r.jsxs)("div",{className:"flex justify-end flex-1 px-2 items-center",children:[o.data&&(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:C,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Create"}),(0,r.jsx)("div",{className:" sm:hidden",children:(0,r.jsx)(m.Z,{})})]}),(0,r.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,r.jsxs)("button",{tabIndex:0,className:"btn p-2 btn-ghost rounded-btn",children:[(0,r.jsx)("label",{className:"hidden sm:block",children:"Theme"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(g.Z,{})})]}),(0,r.jsx)("ul",{tabIndex:0,className:"menu dropdown-content p-2 shadow rounded-box w-52 mt-4 grid grid-cols-1 overflow-y-scroll max-h-screen bg-neutral",children:l.data&&l.data.map((e,s)=>(0,r.jsx)("li",{className:"text-neutral-content bg-neutral",children:(0,r.jsx)("a",{onClick:_,children:e})},s))})]}),o.data?(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:k,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Sign Out"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(f.Z,{})})]}):(0,r.jsxs)("button",{className:"btn btn-ghost rounded-btn p-2",onClick:N,children:[(0,r.jsx)("a",{className:"hidden sm:block",children:"Sign In"}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(p.Z,{})})]}),(0,r.jsx)("button",{className:"btn btn-ghost rounded-btn",onClick:z,children:(0,r.jsx)("div",{className:"avatar aspect-square",children:(0,r.jsx)("div",{className:"w-8 rounded-full flex items-center",children:b?(0,r.jsx)(v(),{src:b,alt:"avatar",width:"0",height:"0",className:"w-auto h-auto",id:"user_avatar"}):(0,r.jsx)(x.Z,{className:"text-3xl"})})})})]})]})},N=()=>{let e=(0,n.a)(),s=(0,i.ay)("boards"),t=(0,i.ay)("pin"),a=(0,i.ay)("initialize"),l=(0,i.ay)("user");return(0,r.jsxs)("div",{className:"fixed bottom-0 left-0",children:[e.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:e.error.message})]})}),s.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:s.error.message})]})}),t.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:t.error.message})]})}),a.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:a.error.message})]})}),l.error&&(0,r.jsx)("div",{className:"alert alert-error shadow-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:l.error.message})]})})]})},k=e=>{let{children:s}=e;return(0,r.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 right-0 flex flex-col bg-base-100 text-base-content",children:[(0,r.jsx)(b,{}),(0,r.jsx)(o,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto flex flex-col",children:s}),(0,r.jsx)(N,{})]})}},4507:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var r=t(5893),n=t(1243),a=t(9557),l=t(7294),i=t(9770),o=t(8621),d=t(8201),c=t(5675),u=t.n(c),h=t(1163),x=t(5591);let m=e=>{var s;let{props:t}=e,n=(0,l.useId)(),[a,c]=(0,l.useState)(),g=(0,i.Z)("feeds"),p=null===(s=g.data)||void 0===s?void 0:s[a],f=g.data.length,j=(0,h.useRouter)(),v=(0,l.useRef)(null);(0,l.useEffect)(()=>((0,o.zT)("index",e=>(c(e),e+1)),()=>{(0,o.zT)("index",e=>(c(),e-1))}),[]),(0,l.useEffect)(()=>{f<=(null!=a?a:50)&&(0,x.JG)("feeds")},[a,f]),(0,l.useEffect)(()=>{let e=v.current,s=new IntersectionObserver(n=>{n.forEach(n=>{let a=n.isIntersecting;a&&(t.setPinsToDisplay(e=>[...e,(0,r.jsx)(m,{props:{setPinsToDisplay:t.setPinsToDisplay}},e.length)]),s.unobserve(e))})});return s.observe(e),()=>{s.unobserve(e)}},[t]);let w=()=>{j.push("/pin/".concat(p.uuid))},b=e=>{e.classList.remove("animate-pulse"),e.removeEventListener("onLoadingComplete",b)};return(0,r.jsxs)("div",{id:n,className:"flex flex-col relative gap-1",onClick:w,ref:v,children:[p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-72 h-auto",children:(0,r.jsx)(u(),{src:p.image_url,alt:"pinImage",width:300,height:300,sizes:"300px",priority:!0,placeholder:"blur",blurDataURL:p.loading_image_url,className:"h-auto w-full rounded-3xl bg-neutral animate-pulse",onLoadingComplete:b})}),(0,r.jsx)("div",{className:"pl-3 pr-3 font-bold overflow-clip",children:p.title}),(0,r.jsxs)("div",{className:"flex max-w-full items-center gap-2 pl-3 pr-3",children:[(0,r.jsx)("div",{className:"avatar aspect-square",children:(0,r.jsx)("div",{className:"w-8 rounded-full flex items-center",children:p.users.profile_picture_url?(0,r.jsx)(u(),{src:p.users.profile_picture_url,alt:"avatar",width:"0",height:"0",className:"w-full aspect-square",id:"profilePicture"}):(0,r.jsx)(d.Z,{className:"w-full aspect-square"})})}),(0,r.jsx)("div",{children:p.users.username})]})]}),!p&&(0,r.jsx)("div",{className:"aspect-square w-full animate-ping"})]})},g=()=>{let[e,s]=(0,l.useState)([]);return(0,l.useEffect)(()=>{s([(0,r.jsx)(m,{props:{setPinsToDisplay:s}},0)])},[]),(0,r.jsx)("div",{className:"h-max flex flex-col gap-5 w-72",children:e})};(0,o.zT)("queue",[]),(0,o.zT)("index",0);let p=()=>{let[e,s]=(0,l.useState)(),[t,o]=(0,l.useState)(!1),d=(0,i.Z)("feeds",async()=>{let e=d.data;if(t)return[...e,...e];e||(e=[]);let s=e.length,r=await a.O.from("pins").select("*,\n        users(*)").order("inserted_at",{ascending:!1}).range(s,s+50);return r.data.length<50&&o(!0),[...e,...r.data]});return(0,l.useEffect)(()=>{let e=window.innerWidth,t=Math.floor(e/300),n=[];for(let e=0;e<t;e++)n.push((0,r.jsx)(g,{className:"max-w-xs"},e));s(n);let a=e=>{let t=[],n=e?e.target.innerWidth:window.innerWidth,a=Math.floor(n/300);for(let e=0;e<a;e++)t.push((0,r.jsx)(g,{},e));s(t)};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),(0,r.jsx)(n.T,{children:d.data&&(0,r.jsx)("div",{className:"flex gap-5 justify-center p-5",children:0!==d.data.length&&e&&e.map(e=>e)})})},f=e=>{let{children:s}=e,t=e=>{"blurredBackground"===e.target.id&&(0,o.zT)("show.signInComponent",!1)};return(0,r.jsx)("div",{id:"blurredBackground",className:"z-50 bg-base-300 text-base-content bg-opacity-20 fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center",onClick:t,children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-start p-10 max-w-sm rounded-box bg-neutral text-neutral-content",children:s})})},j=()=>{let e=e=>{e.currentTarget.classList.add("loading"),e.currentTarget.classList.add("disabled"),(0,o.JX)("signIn",async()=>{let e=await a.O.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.href}});return e})};return(0,r.jsxs)(f,{children:[(0,r.jsx)(u(),{alt:"pinterest logo",src:"./p-logo-lowres.png",width:"100",height:"100"}),(0,r.jsx)("p",{className:"font-extrabold text-center",children:"Welcome to Pinterest"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("button",{className:"btn flex bg-transparent border-accent rounded-box items-center gap-2",onClick:e,children:[(0,r.jsx)(u(),{alt:"google logo",height:"30",width:"30",src:"./Google__G__Logo.svg",style:{aspectRatio:"1"}}),(0,r.jsx)("p",{className:"text-neutral-content",children:"Continue with Google"})]}),(0,r.jsx)("p",{className:"text-center text-xs",children:"By continuing, you agree to Pinterest's Terms of Service and acknowledge you've read our Privacy Policy Notice at collection."})]})]})};var v=t(9744);(0,o.zT)("show.signInComponent",!0);let w=()=>{let e=(0,v.a)(),s=(0,o.C0)("show.signInComponent");return(0,r.jsxs)(n.T,{children:[!e.data&&s&&(0,r.jsx)(j,{}),(0,r.jsx)(p,{})]})};var b=w}},function(e){e.O(0,[725,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);